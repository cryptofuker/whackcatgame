(()=>{"use strict";const e={1:{speed:T(800,900),score:22,time:23e3},2:{speed:T(700,800),score:20,time:19e3},3:{speed:T(600,700),score:18,time:16e3},4:{speed:T(500,600),score:16,time:13e3},5:{speed:T(450,500),score:10,time:11e3}},t=new class{constructor(){this.menuAudio=new Audio("./audio/menu.mp3"),this.gameAudio=new Audio("./audio/game.mp3"),this.winAudio=new Audio("./audio/win.mp3"),this.loseAudio=new Audio("./audio/lose.mp3"),this.catchSound=new Audio("./audio/catch.mp3")}},o=new class{constructor(){this.gameTimerElement=document.querySelector(".game__timer")}createTimer(){let e=S.time/1e3;this.interval=setInterval((function(){e--,L.innerHTML=`${e}`,e<=0&&(clearInterval(this.interval),k("lose")),document.querySelector(".game__timer").style.opacity="1"}),1e3)}stopTimer(){clearInterval(this.interval)}},n=document.querySelector(".menu"),i=document.querySelector(".game"),r=document.querySelector(".modal"),s=document.querySelector(".modal__title"),c=document.querySelector(".modal__img"),l=document.querySelector(".next"),a=document.querySelector(".restart"),d=document.querySelector(".score"),u=document.querySelector(".level"),m=document.querySelector(".start-btn"),p=document.querySelectorAll(".box"),g=document.querySelectorAll(".cat"),h=document.querySelectorAll(".exit");let y,L=document.querySelector(".timer"),A=null!==localStorage.getItem("currentLevelLA")?Number(localStorage.getItem("currentLevelLA")):1,v=!0,S=Object.assign({},e[A]);function T(e,t){return Math.round(Math.random()*(t-e)+e)}function f(e){const t=e[Math.floor(Math.random()*e.length)];return t===y?f(e):(y=t,t)}function q(e){const t=f(p);t.classList.add("up"),setTimeout((()=>{t.classList.remove("up"),v&&q(e)}),e)}function w(){r.classList.contains("hidden")?n.classList.add("hidden"):r.classList.add("hidden"),i.classList.remove("hidden"),t.menuAudio.pause(),function(){v=!0,u.innerHTML=`${A}`,S=Object.assign({},e[A]);for(let e=S.score;e>0;e--){let e=document.createElement("img");e.src="./img/paw.png",e.classList.add("score-paw"),d.append(e)}o.createTimer()}(),setTimeout((()=>{q(S.speed),setTimeout((()=>v=!0),S.time),t.gameAudio.currentTime=0,t.gameAudio.play()}),900)}function b(e){e.isTrusted&&(t.catchSound.currentTime=0,t.catchSound.play(),d.lastElementChild.remove(),this.parentNode.classList.remove("up"),S.score--,S.score<=0&&k("win"))}function k(n){t.gameAudio.pause(),o.stopTimer(),v=!1,"win"===n?(s.innerHTML="Good job!",c.style.backgroundImage="url('./img/win-cat.png')",a.style.display="none",l.style.display="block",A===Object.keys(e).length&&(l.style.display="none"),r.classList.remove("hidden"),t.winAudio.currentTime=0,t.winAudio.play()):"lose"===n&&(localStorage.setItem("currentLevelLA","1"),s.innerHTML="Try again!",c.style.backgroundImage="url('./img/lose-cat.png')",l.style.display="none",a.style.display="block",r.classList.remove("hidden"),t.loseAudio.currentTime=0,t.loseAudio.play())}function I(){for(A=1,localStorage.setItem("currentLevelLA",String(A)),S=Object.assign({},e[A]),r.classList.contains("hidden")||(r.classList.add("hidden"),setTimeout((()=>{l.style.display="block",a.style.display="block"}),700));d.children.length>0;)d.lastChild.remove();o.stopTimer(),t.gameAudio.pause(),t.menuAudio.currentTime=0,t.menuAudio.play(),v=!1,i.classList.add("hidden"),n.classList.remove("hidden")}m.addEventListener("click",w),l.addEventListener("click",(function(){for(A++,localStorage.setItem("currentLevelLA",String(A)),o.stopTimer();d.children.length>0;)d.lastChild.remove();v=!1,w()})),a.addEventListener("click",(function(){for(A=1,localStorage.setItem("currentLevelLA",String(A)),o.stopTimer();d.children.length>0;)d.lastChild.remove();v=!1,w()})),h.forEach((e=>e.addEventListener("click",I))),g.forEach((e=>e.addEventListener("click",b)))})();